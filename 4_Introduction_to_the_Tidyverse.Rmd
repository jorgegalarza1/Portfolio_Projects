
4_Introduction_to_the_Tidyverse

This is only a tool to be used for educational purposes for R and R Markdown coding.

Copy and paste this code to a Rmarkdown (.Rmd) file and start messing around with the data.
Most code has a comment to the right '#', giving a basic explanation of the code's purpose.
The code is separated in sections to make the file look tidy, get it ? jk
Have fun with the code, try it with your own data and learn a lot.

If it is your first time using the packages mentioned below, install the package prior to running code!
In RStudio, select "packages" from the bottom right quadrant > install > dplyr, gapminder

This symbol "%>%" is called a "pipe", and when you see it, think of the words "and then".

Eg.
dataset %>% Get the variable called dataset "and then",
  filter(column_2 == x) %>% Filter column_2 to get all the row values if column_2 value is equal to x, "and then",
  arrange(desc(column_3)) Arrange the dataset in descending order, based on values from column_3
  
---
title: "Introduction to the Tidyverse"
author: "Jorge Galarza"
date: "2022"
output: html_document
---

## Data Wrangling
```{r}
library(gapminder)
library(dplyr)

gapminder # 1704 rows or observation and 6 columns or variables
```

```{r}
gapminder %>%
  filter(year == 2007) # Only get data from year 2007
```

```{r}
gapminder %>%
  filter(country == "United States") # Only get data from the US
```

```{r}
gapminder %>%
  filter(year == 2007, country == "United States") # Only data from 2007 from the US
```

```{r}
gapminder%>%
  arrange(gdpPercap) # Arrange gdp in ascending order
```

```{r}
gapminder%>%
  arrange(desc(gdpPercap)) # Arrange gdp in descending order
```

```{r}
gapminder %>%
  filter(year == 2007) %>%
  arrange(desc(gdpPercap)) # Filter only year 2007, arrange gdp column in descending order
```

```{r}
gapminder %>%
  mutate(pop = pop / 1000000) # Old pop column is being replaced by new pop formula
```

```{r}
gapminder %>%
  mutate(gdp = gdpPercap * pop) # Create new column called gdp
```

```{r}
gapminder %>%
  mutate(gdp = pop * gdpPercap) %>%
  filter(year == 2007) %>%
  arrange(desc(gdp)) # The countries with the highest total gdp in 2007
```

## Data Visualization
```{r}
gapminder_2007 <- gapminder %>%
  filter(year == 2007) # Create variable gapminder_2007, which gets data from gapminder, and only filter for column where the year is 2007
gapminder_2007
```

```{r}
library(ggplot2)
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp)) +
  geom_point() # Creating a scatter plot
```

```{r}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp)) +
  geom_point() +
  scale_x_log10() # Putting x scale in a log10 scale
```

```{r}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent)) + # Put color on different countries
  geom_point() +
  scale_x_log10()
```

```{r}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) + # Use different size to depict higher numbers
  geom_point() +
  scale_x_log10()
```

```{r}
ggplot(gapminder_2007, aes(x = gdpPercap, y = lifeExp)) +
  geom_point() +
  scale_x_log10() +
  facet_wrap(~ continent) # Make different graphs depending on continent (by = ~)
```

```{r}
ggplot(gapminder, aes(x = gdpPercap, y = lifeExp, color = continent, size = pop)) +
    geom_point() +
    scale_x_log10() +
    facet_wrap(~ year)
```

## Grouping and Summarizing
```{r}
gapminder %>%
  summarize(meanLifeExp = mean(lifeExp)) # Summarize collapsed the whole data down to one row and column names meanLifeExp
```

```{r}
gapminder %>%
  filter(year == 2007) %>%
  summarize(meanLifeExp = mean(lifeExp)) # Mean lifeExp for year 2007
```

```{r}
gapminder %>%
  filter(year == 2007) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop)) # Also total population in that year
```

* Functions you can use for summarizing:
  - mean
  - sum
  - median
  - min
  - max

```{r}
gapminder %>%
  group_by(year) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop))
```

```{r}
gapminder %>%
  filter(year == 2007) %>%
  group_by(continent) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop))
```

```{r}
gapminder %>%
  group_by(year, continent) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop))
```

```{r}
by_year <- gapminder %>%
  group_by(year) %>%
  summarize(totalPop = sum(pop),
            meanLifeExp = mean(lifeExp))
by_year

ggplot(by_year, aes(x = year, y = totalPop)) +
  geom_point() +
  expand_limits(y = 0) # If you want the y axis to start at zero
```

```{r}
by_year_continent <- gapminder %>%
  group_by(year, continent) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop))
by_year_continent

ggplot(by_year_continent, aes(x = year, y = totalPop, color = continent)) +
  geom_point() +
  expand_limits(y = 0)
```

## Types of Visualizations

* Types of plots
  - Scatter plot - **geom_point()**
  - Line plots - **geom_line()**
  - Bar plots - **geom_col()**
  - Histograms - **geom_histogram()**
  - Box plot - **geom_boxplot()**
  
```{r}
by_year_continent <- gapminder %>%
  group_by(year, continent) %>%
  summarize(meanLifeExp = mean(lifeExp),
            totalPop = sum(pop))
by_year_continent

ggplot(by_year_continent, aes(x = year, y = meanLifeExp, color = continent)) +
  geom_line() + # This is a line plot
  expand_limits(y = 0)
```

```{r}
by_continent <- gapminder %>%
  filter(year == 2007) %>%
  group_by(continent) %>%
  summarize(meanLifeExp = mean(lifeExp))
by_continent

ggplot(by_continent, aes(x = continent, y = meanLifeExp)) +
  geom_col() # This is a bar plot
```

```{r}
gapminder_2007 <- gapminder %>%
  filter(year == 2007)
gapminder_2007

ggplot(gapminder_2007, aes(x = lifeExp)) +
  geom_histogram(binwidth = 4) # This is a histogram
```

```{r}
gapminder_2007 <- gapminder %>%
  filter(year == 2007)
gapminder_2007

ggplot(gapminder_2007, aes(x = continent, y = lifeExp)) +
  geom_boxplot() # This is a box plot
```
