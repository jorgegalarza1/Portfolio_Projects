5_Gender_Wage_Gap

This is only a tool to be used for educational purposes for R and R Markdown coding.

Data retrieved on 12/02/2022 from 'https://stats.oecd.org/index.aspx?queryid=54751'

Copy and paste this code to a Rmarkdown (.Rmd) file and start messing around with the data.
Most code has a comment to the right '#', giving a basic explanation of the code's purpose.

The data used for this analysis represents the gender wage gap in different places from 2000 to 2020.

---
title: "Gender Wage Gap"
author: "Jorge Galarza"
date: "2022-12-02"
output: html_document
---

```{r}
library(dplyr)
library(ggplot2)
library(viridis)

wage_gap <- read.csv("path to csv file", header = TRUE) # Load in the csv file
head(wage_gap) # Print just the top 6 rows from the data set to see that everything looks how you expect it to look
wage_gap_clean <- wage_gap %>% # Make a new variable called wage_gap_clean from the wage_gap data set, and then
  select(Country, Indicator, Time, Value) %>% # Only keep information from columns Country, Time and Value
  filter(Indicator == "Gender wage gap at median") %>% # Only keep the information from all rows, where column "Indicator" is = "Gender wage gap at median"
  filter(Time == 2000 | Time == 2005 | Time == 2010 | Time == 2015 | Time == 2020) %>% # Only keep the information from all rows, where column "Time" is either 2000 or 2005 or 2010 or 2015 or 2020, and then
  group_by(Country)

wage_gap_clean$Time <- as.factor(wage_gap_clean$Time) # Convert the Time column values into characters, instead of using numeric

head(wage_gap_clean) # Again, check to see that everything looks as expected
```

After you run the following code (which is correct) you will notice something looks funky about the graph. The size of the bars for some countries are very different and not uniform at all to the rest. And like my lab co-worker says "what to do?", the answer is, you look for another way to visualize the information which will help you get the point across.

```{r}
ggplot(wage_gap_clean, aes(x= Value, y=Country, fill = Time)) + 
  geom_bar(position = "dodge", stat = "identity") +
  theme(axis.text.x = element_text(face = NULL, angle = 0, hjust = 0)) +
  scale_fill_viridis(discrete=T, name="") +
  ggtitle("Gender Wage Gap Per Country Grouped by Year") +
  labs(y = "Country", 
       x = "Gender Wage Gap (%)", 
       title = NULL)
```

```{r}
wage_gap_clean_w_5 <- wage_gap_clean %>%
  group_by(Country) %>% # Group the data, regardless of everything else by Country
  summarize(n=n()) %>% # Create a new column "n" that is = "n"
  filter(n==5) # Only get the countries which have exactly 5 entries and exclude all the other ones that have < 5 entries.

wage_gap_clean_w_5 # Always check your work
```

```{r}
wage_gap_clean %>% # From the data
  filter(Country %in% wage_gap_clean_w_5$Country) %>% # Filter from Country, those which qualify from the previous filter and use for ggplot
  ggplot(aes(x= Value, y=reorder(Country, Value), fill = Time)) + 
    geom_bar(position = "dodge", stat = "identity") +
    theme(axis.text.x = element_text(face = NULL, angle = 0, hjust = 0)) +
    scale_fill_viridis(discrete=T, name="") +
    labs(y = "Country", 
         x = "Gender Wage Gap (%)", 
         title = "Gender Wage Gap Per Country Grouped by Year")
```

Lets compare the two extremes and see how they look next to each other: Korea vs New Zealand
```{r}
wage_gap_clean %>%
  filter(Country == "New Zealand" | Country == "Korea") %>%
  ggplot(aes(x = Value, y = Country, fill = Time))+ 
    geom_bar(position = "dodge", stat = "identity") +
    theme(axis.text.x = element_text(face = NULL, angle = 0, hjust = 0)) +
    scale_fill_viridis(discrete=T, name="") +
    labs(y = "Country", 
         x = "Gender Wage Gap (%)", 
         title = "Gender Wage Gap Per Country Grouped by Year")
```

Big difference between both groups, but how do they differ in differences between the maximum value and the minimum value between countries?
Yes, you can see it (kinda) in the graph, but lets look at the numbers.

```{r}
korea <- wage_gap_clean %>%
  filter(Country == "Korea") %>%
  summarize(minimum = min(Value),
            maximum = max(Value),
            difference = maximum - minimum)
korea
  
  
newzealand <- wage_gap_clean %>%
  filter(Country == "New Zealand") %>%
  summarize(minimum = min(Value),
            maximum = max(Value),
            difference = maximum - minimum)
newzealand
```

Nice, now we have two tibbles, how can we do the same but in one step ? By adding an extra country to the filter and next grouping by country

```{r}
together <- wage_gap_clean %>%
  filter(Country == "Korea" | Country == "New Zealand") %>%
  group_by(Country) %>%
  summarize(minimum = min(Value),
            maximum = max(Value),
            difference = maximum - minimum)
together
```

**In conclusion, even though in Korea, the wage between genders is extremely apparent, from the year 2000 to 2020, the numbers have decreased from 41.7% to 31.5% which is a total of 10.2% and in New Zealand they have decrease from 9.6% to 4.6%. Even though the gap is still there, the time when the gap is non existent is coming.**
